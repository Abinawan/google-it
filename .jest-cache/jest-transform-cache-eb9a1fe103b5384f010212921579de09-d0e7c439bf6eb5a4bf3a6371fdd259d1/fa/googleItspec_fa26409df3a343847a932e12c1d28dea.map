{"version":3,"sources":["googleIt.spec.js"],"names":["jest","mock","exec","fn","requireActual","logIt","global","console","log","describe","it","mockClear","expect","not","toHaveBeenCalled","toHaveBeenCalledTimes","undefined","link","result","children","data","toBe","title","snippet"],"mappings":"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","sourcesContent":["/* eslint-disable no-console */\nimport { exec } from 'child_process';\nimport {\n  errorTryingToOpen,\n  openInBrowser,\n  getSnippet,\n  display,\n  // getResults,\n  // getResponseBody,\n} from '../src/googleIt';\nimport { logIt } from '../src/utils';\n\nglobal.console = {\n  log: jest.fn(),\n};\n\njest.mock('child_process', () => ({\n  exec: jest.fn(() => {}),\n}));\n\njest.mock('../src/utils', () => ({\n  ...jest.requireActual('../src/utils'),\n  logIt: jest.fn(() => {}),\n}));\n\ndescribe('errorTryingToOpen', () => {\n  it('does not call console.log when error is falsy', () => {\n    console.log.mockClear();\n    errorTryingToOpen(false);\n    expect(console.log).not.toHaveBeenCalled();\n  });\n\n  it('calls console.log 3 times when error is true', () => {\n    console.log.mockClear();\n    errorTryingToOpen('something really bad', 'stdout', 'stderr');\n    expect(console.log).toHaveBeenCalledTimes(3);\n  });\n});\n\ndescribe('openInBrowser', () => {\n  it('does not call exec when \"open\" is undefined', () => {\n    exec.mockClear();\n    openInBrowser(undefined);\n    expect(exec).not.toHaveBeenCalled();\n  });\n\n  it('calls exec results.slice(0, open).length times when \"open\" is > 0', () => {\n    exec.mockClear();\n    openInBrowser(3, [{ link: '' }, { link: '' }, { link: '' }]);\n    expect(exec).toHaveBeenCalledTimes(3);\n  });\n});\n\ndescribe('getSnippet', () => {\n  it('maps over elem.children and data field, joined by empty string', () => {\n    const result = getSnippet({\n      children: [{ data: '1' }, { data: '2' }, { data: '3' }],\n    });\n    expect(result).toBe('123');\n  });\n\n  it('returns child.children.map(c => c.data) when child.data does not exist', () => {\n    const result = getSnippet({\n      children: [\n        { children: [{ data: '1' }] },\n        { children: [{ data: '2' }] },\n        { children: [{ data: '3' }] },\n      ],\n    });\n    expect(result).toBe('123');\n  });\n});\n\ndescribe('display', () => {\n  it('calls logIt once for each result (+ once for newline) when 3rd arg (onlyUrls) is true', () => {\n    logIt.mockClear();\n    display([{ link: 'a' }, { link: 'b' }], false, true);\n    expect(logIt).toHaveBeenCalledTimes(3);\n  });\n\n  it('calls logIt 4 times for each result (+ once for newline) when 3rd arg is false', () => {\n    logIt.mockClear();\n    display([\n      { title: 'a', link: 'a', snippet: 'a' },\n      { title: 'b', link: 'b', snippet: 'b' },\n    ], false, false);\n    expect(logIt).toHaveBeenCalledTimes(9);\n  });\n});\n"]}