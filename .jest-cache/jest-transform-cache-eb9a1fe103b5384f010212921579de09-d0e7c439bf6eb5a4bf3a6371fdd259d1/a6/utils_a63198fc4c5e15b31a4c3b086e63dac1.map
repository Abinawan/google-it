{"version":3,"sources":["utils.js"],"names":["fs","require","process","env","GOOGLE_IT_TITLE_SELECTOR","GOOGLE_IT_LINK_SELECTOR","GOOGLE_IT_SNIPPET_SELECTOR","defaultUserAgent","defaultLimit","defaultStart","getDefaultRequestOptions","limit","query","userAgent","start","url","qs","q","num","headers","titleSelector","linkSelector","snippetSelector","getTitleSelector","passedValue","getLinkSelector","getSnippetSelector","logIt","message","disableConsole","console","log","saveToFile","output","results","undefined","writeFile","JSON","stringify","err","error","saveResponse","response","htmlFileOutputPath","body","module","exports"],"mappings":"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","sourcesContent":["/* eslint-disable no-console */\n\nconst fs = require('fs');\n\nconst {\n  GOOGLE_IT_TITLE_SELECTOR,\n  GOOGLE_IT_LINK_SELECTOR,\n  GOOGLE_IT_SNIPPET_SELECTOR,\n} = process.env;\n\n// NOTE:\n// I chose the User-Agent value from http://www.browser-info.net/useragents\n// Not setting one causes Google search to not display results\nconst defaultUserAgent = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:34.0) Gecko/20100101 Firefox/34.0';\n\nconst defaultLimit = 10;\nconst defaultStart = 0;\n\nconst getDefaultRequestOptions = ({\n  limit, query, userAgent, start,\n}) => ({\n  url: 'https://www.google.com/search',\n  qs: {\n    q: query,\n    num: limit || defaultLimit,\n    start: start || defaultStart,\n  },\n  headers: {\n    'User-Agent': userAgent || defaultUserAgent,\n  },\n});\n\nconst titleSelector = '#rso > div > div > div > div > div > div.r > a > h3';\nconst linkSelector = 'div.rc > div.r > a';\nconst snippetSelector = '#rso > div > div > div > div > div > div.s > div > span';\n\nconst getTitleSelector = passedValue => (\n  passedValue || GOOGLE_IT_TITLE_SELECTOR || titleSelector\n);\n\nconst getLinkSelector = passedValue => (\n  passedValue || GOOGLE_IT_LINK_SELECTOR || linkSelector\n);\n\nconst getSnippetSelector = passedValue => (\n  passedValue || GOOGLE_IT_SNIPPET_SELECTOR || snippetSelector\n);\n\nconst logIt = (message, disableConsole) => {\n  if (!disableConsole) {\n    console.log(message);\n  }\n};\n\nconst saveToFile = (output, results) => {\n  if (output !== undefined) {\n    fs.writeFile(output, JSON.stringify(results, null, 2), 'utf8', (err) => {\n      if (err) {\n        console.error(`Error writing to file ${output}: ${err}`);\n      }\n    });\n  }\n};\n\nconst saveResponse = (response, htmlFileOutputPath) => {\n  if (htmlFileOutputPath) {\n    fs.writeFile(htmlFileOutputPath, response.body, () => {\n      console.log(`Html file saved to ${htmlFileOutputPath}`);\n    });\n  }\n};\n\nmodule.exports = {\n  defaultUserAgent,\n  defaultLimit,\n  defaultStart,\n  getDefaultRequestOptions,\n  getTitleSelector,\n  getLinkSelector,\n  titleSelector,\n  linkSelector,\n  snippetSelector,\n  getSnippetSelector,\n  logIt,\n  saveToFile,\n  saveResponse,\n};\n"]}