{"version":3,"sources":["googleIt.js"],"names":["request","require","fs","cheerio","exec","getDefaultRequestOptions","getTitleSelector","getLinkSelector","getSnippetSelector","logIt","saveToFile","saveResponse","errorTryingToOpen","error","stdout","stderr","console","log","openInBrowser","open","results","undefined","slice","forEach","result","link","getSnippet","elem","children","map","child","data","c","join","display","disableConsole","onlyUrls","green","title","blue","snippet","getResults","noDisplay","titleSelector","linkSelector","snippetSelector","$","load","titles","contents","each","index","push","length","Object","assign","attribs","href","r","getResponseBody","fromFile","filePath","options","htmlFileOutputPath","query","limit","userAgent","start","Promise","resolve","reject","readFile","err","Error","defaultOptions","response","body","googleIt","config","output","returnHtmlBody","then","catch","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","sourcesContent":["/* eslint-disable no-console */\n/* eslint-disable array-callback-return */\nconst request = require('request');\nconst fs = require('fs');\nconst cheerio = require('cheerio');\nrequire('colors');\nconst { exec } = require('child_process');\n\nconst {\n  getDefaultRequestOptions,\n  getTitleSelector,\n  getLinkSelector,\n  getSnippetSelector,\n  logIt,\n  saveToFile,\n  saveResponse,\n} = require('./utils');\n\nfunction errorTryingToOpen(error, stdout, stderr) {\n  if (error) {\n    console.log(`Error trying to open link in browser: ${error}`);\n    console.log(`stdout: ${stdout}`);\n    console.log(`stderr: ${stderr}`);\n  }\n}\n\nfunction openInBrowser(open, results) {\n  if (open !== undefined) {\n    // open is the first X number of links to open\n    results.slice(0, open).forEach((result) => {\n      exec(`open ${result.link}`, errorTryingToOpen);\n    });\n  }\n}\n\nfunction getSnippet(elem) {\n  return elem.children\n    .map((child) => {\n      if (!child.data) {\n        return child.children.map(c => c.data);\n      }\n      return child.data;\n    })\n    .join('');\n}\n\nfunction display(results, disableConsole, onlyUrls) {\n  logIt('\\n', disableConsole);\n  results.forEach((result) => {\n    if (onlyUrls) {\n      logIt(result.link.green, disableConsole);\n    } else if (result.title) {\n      logIt(result.title.blue, disableConsole);\n      logIt(result.link.green, disableConsole);\n      logIt(result.snippet, disableConsole);\n      logIt('\\n', disableConsole);\n    } else {\n      logIt('Result title is undefined.');\n    }\n  });\n}\n\nfunction getResults({\n  data,\n  noDisplay,\n  disableConsole,\n  onlyUrls,\n  titleSelector,\n  linkSelector,\n  snippetSelector,\n}) {\n  const $ = cheerio.load(data);\n  let results = [];\n\n  const titles = $(getTitleSelector(titleSelector)).contents();\n  titles.each((index, elem) => {\n    if (elem.data) {\n      results.push({ title: elem.data });\n    } else {\n      results.push({ title: elem.children[0].data });\n    }\n  });\n\n  $(getLinkSelector(linkSelector)).map((index, elem) => {\n    if (index < results.length) {\n      results[index] = Object.assign(results[index], {\n        link: elem.attribs.href,\n      });\n    }\n  });\n\n  $(getSnippetSelector(snippetSelector)).map((index, elem) => {\n    if (index < results.length) {\n      results[index] = Object.assign(results[index], {\n        snippet: getSnippet(elem),\n      });\n    }\n  });\n\n  if (onlyUrls) {\n    results = results.map(r => ({ link: r.link }));\n  }\n  if (!noDisplay) {\n    display(results, disableConsole, onlyUrls);\n  }\n  return results;\n}\n\nfunction getResponseBody({\n  fromFile: filePath, options, htmlFileOutputPath, query, limit, userAgent, start,\n}) {\n  return new Promise((resolve, reject) => {\n    if (filePath) {\n      fs.readFile(filePath, (err, data) => {\n        if (err) {\n          return reject(new Error(`Erorr accessing file at ${filePath}: ${err}`));\n        }\n        return resolve(data);\n      });\n    } else {\n      const defaultOptions = getDefaultRequestOptions({\n        limit, query, userAgent, start,\n      });\n      request(Object.assign({}, defaultOptions, options), (error, response, body) => {\n        if (error) {\n          reject(new Error(`Error making web request: ${error}`));\n        }\n        saveResponse(response, htmlFileOutputPath);\n        resolve(body);\n      });\n    }\n  });\n}\n\nfunction googleIt(config) {\n  const {\n    output,\n    open,\n    returnHtmlBody,\n    titleSelector,\n    linkSelector,\n    snippetSelector,\n    start,\n  } = config;\n  return new Promise((resolve, reject) => {\n    getResponseBody(config).then((body) => {\n      const results = getResults({\n        data: body,\n        noDisplay: config['no-display'],\n        disableConsole: config.disableConsole,\n        onlyUrls: config['only-urls'],\n        titleSelector,\n        linkSelector,\n        snippetSelector,\n        start,\n      });\n      saveToFile(output, results);\n      openInBrowser(open, results);\n      if (returnHtmlBody) {\n        return resolve({ results, body });\n      }\n      return resolve(results);\n    }).catch(reject);\n  });\n}\n\nmodule.exports = googleIt;\n"]}