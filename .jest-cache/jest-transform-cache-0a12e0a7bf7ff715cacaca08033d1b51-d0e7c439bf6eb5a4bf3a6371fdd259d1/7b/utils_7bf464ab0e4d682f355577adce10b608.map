{"version":3,"sources":["utils.js"],"names":["fs","require","GOOGLE_IT_TITLE_SELECTOR","GOOGLE_IT_LINK_SELECTOR","GOOGLE_IT_SNIPPET_SELECTOR","process","env","defaultUserAgent","defaultLimit","defaultStart","getDefaultRequestOptions","limit","query","userAgent","start","url","qs","q","num","headers","titleSelector","linkSelector","snippetSelector","getTitleSelector","passedValue","getLinkSelector","getSnippetSelector","logIt","message","disableConsole","console","log","saveToFile","output","results","undefined","writeFile","JSON","stringify","err","saveResponse","response","htmlFileOutputPath","body","module","exports"],"mappings":"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","sourcesContent":["/* eslint-disable no-console */\n\nconst fs = require('fs');\n\nconst {\n  GOOGLE_IT_TITLE_SELECTOR,\n  GOOGLE_IT_LINK_SELECTOR,\n  GOOGLE_IT_SNIPPET_SELECTOR,\n} = process.env;\n\n// NOTE:\n// I chose the User-Agent value from http://www.browser-info.net/useragents\n// Not setting one causes Google search to not display results\nconst defaultUserAgent = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:34.0) Gecko/20100101 Firefox/34.0';\n\nconst defaultLimit = 10;\nconst defaultStart = 0;\n\nconst getDefaultRequestOptions = ({\n  limit, query, userAgent, start,\n}) => ({\n  url: 'https://www.google.com/search',\n  qs: {\n    q: query,\n    num: limit || defaultLimit,\n    start: start || defaultStart,\n  },\n  headers: {\n    'User-Agent': userAgent || defaultUserAgent,\n  },\n});\n\nconst titleSelector = '#rso > div > div > div > div > div > div.r > a > h3';\nconst linkSelector = 'div.rc > div.r > a';\nconst snippetSelector = '#rso > div > div > div > div > div > div.s > div > span';\n\nconst getTitleSelector = passedValue => (\n  passedValue || GOOGLE_IT_TITLE_SELECTOR || titleSelector\n);\n\nconst getLinkSelector = passedValue => (\n  passedValue || GOOGLE_IT_LINK_SELECTOR || linkSelector\n);\n\nconst getSnippetSelector = passedValue => (\n  passedValue || GOOGLE_IT_SNIPPET_SELECTOR || snippetSelector\n);\n\nconst logIt = (message, disableConsole) => {\n  if (!disableConsole) {\n    console.log(message);\n  }\n};\n\nconst saveToFile = (output, results) => {\n  if (output !== undefined) {\n    fs.writeFile(output, JSON.stringify(results, null, 2), 'utf8', (err) => {\n      if (err) {\n        console.err(`Error writing to file ${output}: ${err}`);\n      }\n    });\n  }\n};\n\nconst saveResponse = (response, htmlFileOutputPath) => {\n  if (htmlFileOutputPath) {\n    fs.writeFile(htmlFileOutputPath, response.body, () => {\n      console.log(`Html file saved to ${htmlFileOutputPath}`);\n    });\n  }\n};\n\nmodule.exports = {\n  defaultUserAgent,\n  defaultLimit,\n  defaultStart,\n  getDefaultRequestOptions,\n  getTitleSelector,\n  getLinkSelector,\n  titleSelector,\n  linkSelector,\n  snippetSelector,\n  getSnippetSelector,\n  logIt,\n  saveToFile,\n  saveResponse,\n};\n"]}