{"version":3,"sources":["utils.spec.js"],"names":["jest","mock","global","console","log","fn","err","describe","it","requestOptions","query","expect","toEqual","url","qs","q","num","defaultLimit","start","defaultStart","headers","defaultUserAgent","toBe","titleSelector","linkSelector","snippetSelector","fs","writeFile","not","toHaveBeenCalled"],"mappings":";;AAqBAA,IAAI,CAACC,IAAL,CAAU,IAAV;;AArBA;;AAEA;;;;AAcAC,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,GAAG,EAAEJ,IAAI,CAACK,EAAL,EADU;AAEfC,EAAAA,GAAG,EAAEN,IAAI,CAACK,EAAL;AAFU,CAAjB;AAOAE,QAAQ,CAAC,0BAAD,EAA6B,YAAM;AACzCC,EAAAA,EAAE,CAAC,wEAAD,EAA2E,YAAM;AACjF,QAAMC,cAAc,GAAG,qCAAyB;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAAzB,CAAvB;AACAC,IAAAA,MAAM,CAACF,cAAD,CAAN,CAAuBG,OAAvB,CAA+B;AAC7BC,MAAAA,GAAG,EAAE,+BADwB;AAE7BC,MAAAA,EAAE,EAAE;AACFC,QAAAA,CAAC,EAAE,KADD;AAEFC,QAAAA,GAAG,EAAEC,mBAFH;AAGFC,QAAAA,KAAK,EAAEC;AAHL,OAFyB;AAO7BC,MAAAA,OAAO,EAAE;AACP,sBAAcC;AADP;AAPoB,KAA/B;AAWD,GAbC,CAAF;AAcD,CAfO,CAAR;AAiBAd,QAAQ,CAAC,kBAAD,EAAqB,YAAM;AACjCC,EAAAA,EAAE,CAAC,0FAAD,EAA6F,YAAM;AACnGG,IAAAA,MAAM,CAAC,8BAAD,CAAN,CAA2BW,IAA3B,CAAgCC,oBAAhC;AACD,GAFC,CAAF;AAGD,CAJO,CAAR;AAMAhB,QAAQ,CAAC,iBAAD,EAAoB,YAAM;AAChCC,EAAAA,EAAE,CAAC,0FAAD,EAA6F,YAAM;AACnGG,IAAAA,MAAM,CAAC,6BAAD,CAAN,CAA0BW,IAA1B,CAA+BE,mBAA/B;AACD,GAFC,CAAF;AAGD,CAJO,CAAR;AAMAjB,QAAQ,CAAC,oBAAD,EAAuB,YAAM;AACnCC,EAAAA,EAAE,CAAC,0FAAD,EAA6F,YAAM;AACnGG,IAAAA,MAAM,CAAC,gCAAD,CAAN,CAA6BW,IAA7B,CAAkCG,sBAAlC;AACD,GAFC,CAAF;AAGD,CAJO,CAAR;AAMAlB,QAAQ,CAAC,YAAD,EAAe,YAAM;AAC3BC,EAAAA,EAAE,CAAC,+DAAD,EAAkE,YAAM;AACxE;AACAG,IAAAA,MAAM,CAACe,YAAGC,SAAJ,CAAN,CAAqBC,GAArB,CAAyBC,gBAAzB;AACD,GAHC,CAAF;AAKArB,EAAAA,EAAE,CAAC,uCAAD,EAA0C,YAAM;AAChD,2BAAW,sBAAX;AACAG,IAAAA,MAAM,CAACe,YAAGC,SAAJ,CAAN,CAAqBE,gBAArB;AACD,GAHC,CAAF;AAID,CAVO,CAAR","sourcesContent":["import fs from 'fs';\n\nimport {\n  getDefaultRequestOptions,\n  getTitleSelector,\n  getLinkSelector,\n  getSnippetSelector,\n  defaultLimit,\n  defaultStart,\n  defaultUserAgent,\n  titleSelector,\n  linkSelector,\n  snippetSelector,\n  saveToFile,\n} from '../src/utils';\n\nglobal.console = {\n  log: jest.fn(),\n  err: jest.fn(),\n};\n\njest.mock('fs');\n\ndescribe('getDefaultRequestOptions', () => {\n  it('uses default limit, start, and userAgent when none of those are passed', () => {\n    const requestOptions = getDefaultRequestOptions({ query: 'foo' });\n    expect(requestOptions).toEqual({\n      url: 'https://www.google.com/search',\n      qs: {\n        q: 'foo',\n        num: defaultLimit,\n        start: defaultStart,\n      },\n      headers: {\n        'User-Agent': defaultUserAgent,\n      },\n    });\n  });\n});\n\ndescribe('getTitleSelector', () => {\n  it('uses the default value when passedValue is null/undefined and the env var does not exist', () => {\n    expect(getTitleSelector()).toBe(titleSelector);\n  });\n});\n\ndescribe('getLinkSelector', () => {\n  it('uses the default value when passedValue is null/undefined and the env var does not exist', () => {\n    expect(getLinkSelector()).toBe(linkSelector);\n  });\n});\n\ndescribe('getSnippetSelector', () => {\n  it('uses the default value when passedValue is null/undefined and the env var does not exist', () => {\n    expect(getSnippetSelector()).toBe(snippetSelector);\n  });\n});\n\ndescribe('saveToFile', () => {\n  it('does not call fs.writeFile when output (1st arg) is undefined', () => {\n    saveToFile();\n    expect(fs.writeFile).not.toHaveBeenCalled();\n  });\n\n  it('calls fs.writeFile when output exists', () => {\n    saveToFile('/path/to/output.json');\n    expect(fs.writeFile).toHaveBeenCalled();\n  });\n});\n"]}